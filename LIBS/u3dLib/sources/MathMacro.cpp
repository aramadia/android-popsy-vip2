/*-------------------------------------------------------------+
 |                       MathMacro.cpp                          |
 |                                                              |
 |  des macros en ASM ou non pour aller plus vite sur certaine  |
 |                  opérations mathématiques                    |
 |                                                              |
 |  U2^PoPsy TeAm 2000                                      |
 +-------------------------------------------------------------*/

#include "U3D3.h"

//----------------------------------------------------------------------------------------------------------
//                              +------------------------------+
//                              |    Les variables globales    |
//                              +------------------------------+
//----------------------------------------------------------------------------------------------------------

Ufloat OneOnSqrt_Seed[2048];



//----------------------------------------------------------------------------------------------------------
//                                  +---------------------+
//                                  |    Les Fonctions    |
//                                  +---------------------+
//----------------------------------------------------------------------------------------------------------
void Build_OneOnSqrtTab() {
    int             i;
    int             tmp,tmp1;
    float           x1, x2, Seed;
    unsigned char*  Xo;

    Xo = (unsigned char*)&tmp1;

    for (i=0; i<2048; ++i) {
        tmp = i<<20;   // on shl de 20 paskeu on sait ke l'on ne prendra jamais les valeurs negatives !

        tmp1 = 0;
        tmp1 |= tmp;
        x1 = *(float*)Xo;

        tmp1 = 0x000FFFFF;
        tmp1 |= tmp;
        x2 = *(float*)Xo;

        if (x1==0.0 && x2==0.0) Seed = 0.0;
        else Seed = 1.0 / sqrt((x1 + x2)*.5f);

        OneOnSqrt_Seed[i] = Seed;
    }
}
//----------------------------------------------------------------------------------------------------------
